<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fichas-Medicas App</title>

  <!-- Enlace al CSS de Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

 
</head>
<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">     
    <div class="container">
        <a href="#" class="navbar-brand">Gestor de Fichas Médicas</a>
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav">
               <li class="nav-item"> <a href="/" class="nav-link">Todas</a></li>
               <li class="nav-item"><a href="/pendientes" class="nav-link">Pendientes</a></li>
               <li class="nav-item"><a href="/atendidas" class="nav-link">Atendidas</a></li>
               <li class="nav-item"><a href="/eliminadas" class="nav-link">Eliminadas</a></li>
               <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Áreas
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/filtrar?area=Pediatría">Pediatría</a></li>
                        <li><a class="dropdown-item" href="/filtrar?area=Medicina+General">Medicina General</a></li>
                        <li><a class="dropdown-item" href="/filtrar?area=Cardiología">Cardiología</a></li>
                        <li><a class="dropdown-item" href="/filtrar?area=Oftalmología">Oftalmología</a></li>
                        <li><a class="dropdown-item" href="/filtrar?area=Ginecología">Ginecología</a></li>
                        <li><a class="dropdown-item" href="/filtrar?area=Dermatología">Dermatología</a></li>
                        <li><a class="dropdown-item" href="/filtrar?area=Alergología">Alergología</a></li>
                        <li><a class="dropdown-item" href="/filtrar?area=Digestivo">Digestivo</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
  
  </div>
  </nav>
  
  
  <div class="container" py-5>
    
    <h2 class="mt-5 mb-4">{{title}}</h2>

    <form method="POST" action="/add" class="d-flex mb-4">
        <input type="text" class="form-control me-2" name="nombre" placeholder="Nombre del paciente" required>
        <input type="text" class="form-control me-2" name="edad" placeholder="Edad del paciente" required>
        <select class="form-select" name="area" required>
            <option value="" disabled selected>Área de atención</option>
            <option value="Pediatría">Pediatría</option>
            <option value="Cardiología">Cardiología</option>
            <option value="Traumatología">Traumatología</option>
            <option value="Dermatología">Dermatología</option>
            <option value="Ginecología">Ginecología</option>
            <option value="Medicina-General">Medicina General</option>
            <option value="Oftalmología">Oftalmología</option>
            <option value="Nutrición">Nutrición</option>
        
        </select>
 
        <button class="btn btn-success rounded-pill d-flex align-items-center gap-2" type="submit">
        <i class="bi bi-clipboard-check-fill"></i>
        Añadir Ficha
        </button>


    </form>
  <table class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Nombre</th>
        <th scope="col">Edad</th>
        <th scope="col">Área</th>
        <th scope="col">Estado</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
  </div>
  
  <tbody>
  {% for ficha in fichas %}
  <tr>
    <td>{{ficha.id}}</td>
    <td>{{ficha.nombre}}</td>
    <td>{{ficha.edad}}</td>
    <td>{{ficha.area}}</td>

    <td>
      {% if ficha.eliminado %}
        <span class="badge bg-danger">Eliminado</span>
      {% elif ficha.done %}
        <span class="badge bg-success">Atendido</span>
      {% else %}
        <span class="badge bg-warning text-dark">Pendiente</span>
      {% endif %}
    </td>

    <td>
      {% if ficha.eliminado %}
        <a href="{{ url_for('restaurar_ficha', ficha_id=ficha.id) }}" class="btn btn-primary">Restaurar</a>
      {% elif ficha.done %}
        <a href="{{ url_for('eliminar_ficha', ficha_id=ficha.id) }}" class="btn btn-danger btn-sm boton-compacto">Eliminar</a>
      {% else %}
        <a href="{{ url_for('marcar_atendida', ficha_id=ficha.id) }}" class="btn btn-success btn-sm boton-compacto">Atendido</a>
        <a href="{{ url_for('eliminar_ficha', ficha_id=ficha.id) }}" class="btn btn-danger btn-sm boton-compacto">Eliminar</a>
       
        {% endif %}
    </td>
  </tr>
  {% endfor %}
</tbody>



  </table>
    
 <!-- Script de Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
</body>
</html>
